import { BaseSite, Province, ProjectStage } from './siteTypes';

export type SolarTechnology = 'fixed_tilt' | 'single_axis' | 'dual_axis' | 'bifacial' | 'agrivoltaic';
export type GridConnection = 'transmission' | 'distribution' | 'behind_meter' | 'planned';
export type LandType = 'agricultural' | 'brownfield' | 'industrial' | 'crown_land' | 'private';

export interface SolarFarmSite extends BaseSite {
  category: 'solar';
  technology: SolarTechnology;
  capacityMW: number;
  availableLandAcres: number;
  annualSolarHours: number; // Peak sun hours per year
  avgDailySolarIrradiance: number; // kWh/m²/day
  gridConnection: GridConnection;
  transmissionCapacityMW: number;
  estimatedAnnualGWh: number;
  landType: LandType;
  environmentalClearance: 'not_started' | 'in_progress' | 'approved';
  communityBenefitAgreement: boolean;
  batteryStorageMW?: number;
  ppaPricePerMWh?: number;
  carbonOffsetTonnes: number; // Annual CO2 offset
}

export const solarFarmSites: SolarFarmSite[] = [
  {
    id: "solar-ab-001",
    name: "Vulcan Solar Complex",
    category: "solar",
    latitude: 50.4000,
    longitude: -113.2500,
    province: "AB",
    region: "Southern Alberta",
    stage: "construction",
    viabilityScore: 91,
    estimatedCapex: 380,
    description: "One of Canada's largest solar projects leveraging Alberta's exceptional solar resource.",
    technology: "single_axis",
    capacityMW: 400,
    availableLandAcres: 3200,
    annualSolarHours: 2300,
    avgDailySolarIrradiance: 4.8,
    gridConnection: "transmission",
    transmissionCapacityMW: 450,
    estimatedAnnualGWh: 750,
    landType: "agricultural",
    environmentalClearance: "approved",
    communityBenefitAgreement: true,
    batteryStorageMW: 100,
    ppaPricePerMWh: 45,
    carbonOffsetTonnes: 280000,
    nearestHighwayKm: 8,
    nearestGridKm: 5,
    owner: "TransAlta Renewables",
  },
  {
    id: "solar-on-001",
    name: "Kingston Clean Energy Park",
    category: "solar",
    latitude: 44.2312,
    longitude: -76.4860,
    province: "ON",
    region: "Eastern Ontario",
    stage: "permitting",
    viabilityScore: 85,
    estimatedCapex: 220,
    description: "Brownfield redevelopment converting former industrial land to clean energy generation.",
    technology: "bifacial",
    capacityMW: 200,
    availableLandAcres: 1400,
    annualSolarHours: 1950,
    avgDailySolarIrradiance: 4.2,
    gridConnection: "transmission",
    transmissionCapacityMW: 250,
    estimatedAnnualGWh: 320,
    landType: "brownfield",
    environmentalClearance: "in_progress",
    communityBenefitAgreement: true,
    batteryStorageMW: 50,
    carbonOffsetTonnes: 120000,
    nearestHighwayKm: 3,
    nearestGridKm: 2,
  },
  {
    id: "solar-sk-001",
    name: "Swift Current Solar Ranch",
    category: "solar",
    latitude: 50.2881,
    longitude: -107.7939,
    province: "SK",
    region: "Southwest Saskatchewan",
    stage: "assessment",
    viabilityScore: 88,
    estimatedCapex: 280,
    description: "Agrivoltaic project combining solar generation with sheep grazing on crown land.",
    technology: "agrivoltaic",
    capacityMW: 300,
    availableLandAcres: 2800,
    annualSolarHours: 2400,
    avgDailySolarIrradiance: 5.0,
    gridConnection: "transmission",
    transmissionCapacityMW: 350,
    estimatedAnnualGWh: 580,
    landType: "crown_land",
    environmentalClearance: "not_started",
    communityBenefitAgreement: false,
    carbonOffsetTonnes: 220000,
    nearestHighwayKm: 12,
    nearestGridKm: 15,
  },
  {
    id: "solar-bc-001",
    name: "Okanagan Sun Valley",
    category: "solar",
    latitude: 49.4991,
    longitude: -119.5937,
    province: "BC",
    region: "Okanagan Valley",
    stage: "planning",
    viabilityScore: 79,
    estimatedCapex: 150,
    description: "Community solar project serving Penticton and surrounding municipalities.",
    technology: "single_axis",
    capacityMW: 120,
    availableLandAcres: 950,
    annualSolarHours: 2100,
    avgDailySolarIrradiance: 4.5,
    gridConnection: "distribution",
    transmissionCapacityMW: 150,
    estimatedAnnualGWh: 200,
    landType: "agricultural",
    environmentalClearance: "not_started",
    communityBenefitAgreement: true,
    batteryStorageMW: 30,
    ppaPricePerMWh: 52,
    carbonOffsetTonnes: 8000, // BC grid already clean
    nearestHighwayKm: 5,
    nearestGridKm: 3,
  },
  {
    id: "solar-on-002",
    name: "Sarnia Petrochemical Transition",
    category: "solar",
    latitude: 42.9745,
    longitude: -82.4066,
    province: "ON",
    region: "Southwestern Ontario",
    stage: "opportunity",
    viabilityScore: 82,
    estimatedCapex: 350,
    description: "Large-scale solar on former refinery lands as part of regional energy transition.",
    technology: "bifacial",
    capacityMW: 350,
    availableLandAcres: 2400,
    annualSolarHours: 2000,
    avgDailySolarIrradiance: 4.3,
    gridConnection: "transmission",
    transmissionCapacityMW: 400,
    estimatedAnnualGWh: 560,
    landType: "brownfield",
    environmentalClearance: "not_started",
    communityBenefitAgreement: false,
    batteryStorageMW: 150,
    carbonOffsetTonnes: 210000,
    nearestHighwayKm: 2,
    nearestGridKm: 1,
  },
  {
    id: "solar-ab-002",
    name: "Brooks Agri-Solar Project",
    category: "solar",
    latitude: 50.5642,
    longitude: -111.8989,
    province: "AB",
    region: "Eastern Alberta",
    stage: "planning",
    viabilityScore: 86,
    estimatedCapex: 180,
    description: "Dual-use agricultural land with solar panels over grazing pastures.",
    technology: "agrivoltaic",
    capacityMW: 175,
    availableLandAcres: 1600,
    annualSolarHours: 2350,
    avgDailySolarIrradiance: 4.9,
    gridConnection: "distribution",
    transmissionCapacityMW: 200,
    estimatedAnnualGWh: 330,
    landType: "agricultural",
    environmentalClearance: "in_progress",
    communityBenefitAgreement: true,
    carbonOffsetTonnes: 125000,
    nearestHighwayKm: 6,
    nearestGridKm: 8,
  },
  {
    id: "solar-qc-001",
    name: "Montérégie Solar Fields",
    category: "solar",
    latitude: 45.2500,
    longitude: -73.0000,
    province: "QC",
    region: "Montérégie",
    stage: "assessment",
    viabilityScore: 74,
    estimatedCapex: 200,
    description: "Complementary solar generation to Quebec's hydro-dominated grid for peak demand.",
    technology: "fixed_tilt",
    capacityMW: 150,
    availableLandAcres: 1100,
    annualSolarHours: 1850,
    avgDailySolarIrradiance: 4.0,
    gridConnection: "distribution",
    transmissionCapacityMW: 175,
    estimatedAnnualGWh: 220,
    landType: "agricultural",
    environmentalClearance: "not_started",
    communityBenefitAgreement: false,
    carbonOffsetTonnes: 5000, // Quebec grid very clean
    nearestHighwayKm: 4,
    nearestGridKm: 6,
  },
  {
    id: "solar-mb-001",
    name: "Portage Solar Station",
    category: "solar",
    latitude: 49.9728,
    longitude: -98.2919,
    province: "MB",
    region: "Central Manitoba",
    stage: "opportunity",
    viabilityScore: 77,
    estimatedCapex: 120,
    description: "Strategic solar addition to Manitoba Hydro's renewable portfolio.",
    technology: "dual_axis",
    capacityMW: 100,
    availableLandAcres: 750,
    annualSolarHours: 2150,
    avgDailySolarIrradiance: 4.4,
    gridConnection: "distribution",
    transmissionCapacityMW: 120,
    estimatedAnnualGWh: 175,
    landType: "crown_land",
    environmentalClearance: "not_started",
    communityBenefitAgreement: false,
    batteryStorageMW: 25,
    carbonOffsetTonnes: 3500,
    nearestHighwayKm: 10,
    nearestGridKm: 12,
  },
];

export const getSolarTechLabel = (tech: SolarTechnology): string => {
  const labels: Record<SolarTechnology, string> = {
    fixed_tilt: 'Fixed Tilt',
    single_axis: 'Single-Axis Tracking',
    dual_axis: 'Dual-Axis Tracking',
    bifacial: 'Bifacial Panels',
    agrivoltaic: 'Agrivoltaic',
  };
  return labels[tech];
};

export const getSolarTechColor = (tech: SolarTechnology): string => {
  const colors: Record<SolarTechnology, string> = {
    fixed_tilt: '#95A5A6',
    single_axis: '#F1C40F',
    dual_axis: '#E67E22',
    bifacial: '#3498DB',
    agrivoltaic: '#2ECC71',
  };
  return colors[tech];
};
