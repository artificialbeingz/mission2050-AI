import { BaseSite, Province, ProjectStage } from './siteTypes';

export type DataCenterTier = 'tier_1' | 'tier_2' | 'tier_3' | 'tier_4';
export type CoolingType = 'air' | 'liquid' | 'hybrid' | 'free_cooling';
export type PowerSource = 'grid' | 'renewable' | 'hybrid' | 'onsite_generation';

export interface DataCenterSite extends BaseSite {
  category: 'datacenter';
  tier: DataCenterTier;
  powerCapacityMW: number;
  availableLandAcres: number;
  fiberConnectivity: 'dark_fiber' | 'lit_fiber' | 'planned' | 'none';
  latencyToToronto: number; // ms
  latencyToMontreal: number; // ms
  coolingType: CoolingType;
  renewableEnergyPercent: number;
  powerSource: PowerSource;
  averagePUE: number; // Power Usage Effectiveness
  nearestFiberKm: number;
  climateZone: 'cold' | 'temperate' | 'varied';
  annualCoolingDays: number; // Days requiring active cooling
  incentivesAvailable: string[];
}

export const dataCenterSites: DataCenterSite[] = [
  {
    id: "dc-qc-001",
    name: "Lévis Hyperscale Campus",
    category: "datacenter",
    latitude: 46.8032,
    longitude: -71.1779,
    province: "QC",
    region: "Capitale-Nationale",
    stage: "opportunity",
    viabilityScore: 92,
    estimatedCapex: 850,
    description: "Prime 200-acre site with direct access to Hydro-Québec's low-cost renewable power grid. Ideal for hyperscale AI/ML workloads.",
    tier: "tier_4",
    powerCapacityMW: 150,
    availableLandAcres: 200,
    fiberConnectivity: "dark_fiber",
    latencyToToronto: 8,
    latencyToMontreal: 3,
    coolingType: "free_cooling",
    renewableEnergyPercent: 99,
    powerSource: "renewable",
    averagePUE: 1.15,
    nearestFiberKm: 2,
    nearestHighwayKm: 5,
    nearestGridKm: 0.5,
    climateZone: "cold",
    annualCoolingDays: 45,
    incentivesAvailable: ["Quebec Investment Tax Credit", "Federal SR&ED", "Green Infrastructure Fund"],
  },
  {
    id: "dc-on-001",
    name: "Toronto West Tech Park",
    category: "datacenter",
    latitude: 43.7001,
    longitude: -79.7163,
    province: "ON",
    region: "Greater Toronto Area",
    stage: "assessment",
    viabilityScore: 88,
    estimatedCapex: 1200,
    description: "Strategic location in Mississauga with excellent connectivity to Toronto IX and major cloud on-ramps.",
    tier: "tier_4",
    powerCapacityMW: 100,
    availableLandAcres: 75,
    fiberConnectivity: "dark_fiber",
    latencyToToronto: 1,
    latencyToMontreal: 7,
    coolingType: "hybrid",
    renewableEnergyPercent: 65,
    powerSource: "hybrid",
    averagePUE: 1.25,
    nearestFiberKm: 0.5,
    nearestHighwayKm: 2,
    nearestGridKm: 1,
    climateZone: "temperate",
    annualCoolingDays: 90,
    owner: "DataVault Properties",
    incentivesAvailable: ["Ontario Jobs & Prosperity Fund", "Federal Strategic Innovation Fund"],
  },
  {
    id: "dc-bc-001",
    name: "Kamloops Digital Hub",
    category: "datacenter",
    latitude: 50.6745,
    longitude: -120.3273,
    province: "BC",
    region: "Thompson-Okanagan",
    stage: "planning",
    viabilityScore: 79,
    estimatedCapex: 450,
    description: "Interior BC location with low seismic risk, clean hydro power, and growing fiber backbone.",
    tier: "tier_3",
    powerCapacityMW: 50,
    availableLandAcres: 120,
    fiberConnectivity: "lit_fiber",
    latencyToToronto: 25,
    latencyToMontreal: 30,
    coolingType: "free_cooling",
    renewableEnergyPercent: 98,
    powerSource: "renewable",
    averagePUE: 1.18,
    nearestFiberKm: 8,
    nearestHighwayKm: 3,
    nearestGridKm: 5,
    climateZone: "varied",
    annualCoolingDays: 60,
    incentivesAvailable: ["BC Tech Fund", "Rural Development Grant"],
  },
  {
    id: "dc-ab-001",
    name: "Calgary Enterprise Zone",
    category: "datacenter",
    latitude: 51.0486,
    longitude: -114.0708,
    province: "AB",
    region: "Calgary Metropolitan",
    stage: "permitting",
    viabilityScore: 85,
    estimatedCapex: 680,
    description: "Low-latency connection to US markets via fiber routes. Competitive power rates and no provincial sales tax.",
    tier: "tier_3",
    powerCapacityMW: 75,
    availableLandAcres: 90,
    fiberConnectivity: "dark_fiber",
    latencyToToronto: 18,
    latencyToMontreal: 22,
    coolingType: "free_cooling",
    renewableEnergyPercent: 35,
    powerSource: "hybrid",
    averagePUE: 1.20,
    nearestFiberKm: 3,
    nearestHighwayKm: 1,
    nearestGridKm: 2,
    climateZone: "cold",
    annualCoolingDays: 35,
    owner: "Prairie Cloud Inc",
    incentivesAvailable: ["Alberta Innovation Grant", "Municipal Tax Abatement"],
  },
  {
    id: "dc-qc-002",
    name: "Montréal AI Quarter",
    category: "datacenter",
    latitude: 45.5088,
    longitude: -73.5878,
    province: "QC",
    region: "Montréal",
    stage: "construction",
    viabilityScore: 94,
    estimatedCapex: 950,
    description: "Purpose-built AI training facility in Montreal's tech corridor, adjacent to Mila AI Institute.",
    tier: "tier_4",
    powerCapacityMW: 120,
    availableLandAcres: 45,
    fiberConnectivity: "dark_fiber",
    latencyToToronto: 7,
    latencyToMontreal: 0.5,
    coolingType: "liquid",
    renewableEnergyPercent: 99,
    powerSource: "renewable",
    averagePUE: 1.12,
    nearestFiberKm: 0.2,
    nearestHighwayKm: 1,
    nearestGridKm: 0.3,
    climateZone: "cold",
    annualCoolingDays: 50,
    owner: "QScale Technologies",
    incentivesAvailable: ["Quebec AI Strategy Fund", "Federal Supercluster Initiative"],
  },
  {
    id: "dc-ns-001",
    name: "Halifax Atlantic Gateway",
    category: "datacenter",
    latitude: 44.6488,
    longitude: -63.5752,
    province: "NS",
    region: "Halifax Regional Municipality",
    stage: "opportunity",
    viabilityScore: 76,
    estimatedCapex: 320,
    description: "Strategic transatlantic cable landing point with access to European markets.",
    tier: "tier_3",
    powerCapacityMW: 40,
    availableLandAcres: 60,
    fiberConnectivity: "dark_fiber",
    latencyToToronto: 12,
    latencyToMontreal: 10,
    coolingType: "free_cooling",
    renewableEnergyPercent: 45,
    powerSource: "hybrid",
    averagePUE: 1.22,
    nearestFiberKm: 5,
    nearestHighwayKm: 4,
    nearestGridKm: 6,
    climateZone: "temperate",
    annualCoolingDays: 55,
    incentivesAvailable: ["Atlantic Innovation Fund", "Nova Scotia Digital Strategy"],
  },
  {
    id: "dc-sk-001",
    name: "Saskatoon Innovation Campus",
    category: "datacenter",
    latitude: 52.1332,
    longitude: -106.6700,
    province: "SK",
    region: "Saskatoon",
    stage: "assessment",
    viabilityScore: 72,
    estimatedCapex: 280,
    description: "Central Canada location with growing agricultural tech demand and competitive land costs.",
    tier: "tier_2",
    powerCapacityMW: 30,
    availableLandAcres: 150,
    fiberConnectivity: "lit_fiber",
    latencyToToronto: 20,
    latencyToMontreal: 24,
    coolingType: "free_cooling",
    renewableEnergyPercent: 25,
    powerSource: "grid",
    averagePUE: 1.28,
    nearestFiberKm: 12,
    nearestHighwayKm: 2,
    nearestGridKm: 4,
    climateZone: "cold",
    annualCoolingDays: 30,
    incentivesAvailable: ["Saskatchewan Tech Incentive", "Innovation Saskatchewan Grant"],
  },
  {
    id: "dc-on-002",
    name: "Ottawa Government Cloud",
    category: "datacenter",
    latitude: 45.4215,
    longitude: -75.6972,
    province: "ON",
    region: "National Capital Region",
    stage: "planning",
    viabilityScore: 86,
    estimatedCapex: 520,
    description: "Secure facility designed for government workloads with Protected B certification path.",
    tier: "tier_4",
    powerCapacityMW: 60,
    availableLandAcres: 40,
    fiberConnectivity: "dark_fiber",
    latencyToToronto: 5,
    latencyToMontreal: 2,
    coolingType: "hybrid",
    renewableEnergyPercent: 75,
    powerSource: "hybrid",
    averagePUE: 1.20,
    nearestFiberKm: 1,
    nearestHighwayKm: 3,
    nearestGridKm: 1.5,
    climateZone: "cold",
    annualCoolingDays: 55,
    owner: "Secure Cloud Canada",
    incentivesAvailable: ["Federal Procurement Program", "Eastern Ontario Development Fund"],
  },
];

export const getTierLabel = (tier: DataCenterTier): string => {
  const labels: Record<DataCenterTier, string> = {
    tier_1: 'Tier I - Basic',
    tier_2: 'Tier II - Redundant',
    tier_3: 'Tier III - Concurrent',
    tier_4: 'Tier IV - Fault Tolerant',
  };
  return labels[tier];
};

export const getTierColor = (tier: DataCenterTier): string => {
  const colors: Record<DataCenterTier, string> = {
    tier_1: '#95A5A6',
    tier_2: '#F1C40F',
    tier_3: '#3498DB',
    tier_4: '#2ECC71',
  };
  return colors[tier];
};
